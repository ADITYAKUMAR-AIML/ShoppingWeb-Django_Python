{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FashionCompras</title>

  <style>
    * {margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif;}
    body {background: #f8f9fa; color: #333;}

    /* Header */
    header {
      background: #fff;
      padding: 1rem 5%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    header .logo {font-size: 1.5rem; font-weight: bold; color: #ff6b6b;}
    header nav a {
      margin: 0 1rem;
      text-decoration: none;
      color: #333;
      font-weight: 500;
    }
    header .search-box input {
      padding: 0.5rem;
      border: 1px solid #ddd;
      border-radius: 5px;
    }



    /* Hero */
    .hero {
      background: url('https://via.placeholder.com/1600x500/ff6b6b/fff?text=Big+Sale+50%25+Off') no-repeat center/cover;
      color: #fff;
      text-align: center;
      padding: 5rem 1rem;
    }
    .hero h1 {font-size: 3rem; margin-bottom: 1rem;}
    .hero button {
      background: #fff;
      color: #ff6b6b;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 5px;
      font-size: 1rem;
      cursor: pointer;
    }

    /* Categories */
    .categories {
      padding: 2rem 5%;
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(150px,1fr));
      gap: 1rem;
    }
    .category {
      background: #fff;
      padding: 2rem;
      text-align: center;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: 0.3s;
    }
    .category:hover {transform: translateY(-5px);}

    /* Products Grid */
    .products {
      padding: 2rem 5%;
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(220px,1fr));
      gap: 1.5rem;
    }
    .product {
      background: #fff;
      padding: 1rem;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      transition: 0.3s;
      /* if you intended fixed size, uncomment next two lines */
      /* height: 100px; */
      /* width: 100px; */
    }
    .product img {max-width: 100%; border-radius: 10px; height: 100px; width: 100px;}
    .product h3 {margin: 0.8rem 0;}
    .product p {color: #666;}
    .product button {
      background: #ff6b6b;
      color: #fff;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      cursor: pointer;
    }
    .product:hover {transform: translateY(-5px);}

    .hidden-product {
      background: #fff;
      padding: 1rem;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      transition: 0.3s;
    }
    .hidden-product img {
      width: 200px;
      height: 200px;
      object-fit: fit;
      border-radius: 10px;
    }
    .hidden-product h3 { margin: 0.8rem 0; }
    .hidden-product p { color: #666; }
    .hidden-product button {
      background: #ff6b6b;
      color: #fff;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      cursor: pointer;
    }
    .hidden-product:hover { transform: translateY(-5px); }

    /* Footer */
    footer {
      background: #333;
      color: #fff;
      text-align: center;
      padding: 2rem 5%;
      margin-top: 2rem;
    }
    .categories-links{
      text-decoration: none;
      color: #ff0000ff;
    }
    footer a { color: #ff6b6b; text-decoration: none; } /* for link */
  </style>
</head>
<body>



  <!-- Header -->
  <header>
    <div class="logo">FashionCompras</div>
    <nav>
      <a href="{% url 'home' %}">Home</a>
      <a href="{% url 'Shop' %}">Shop</a>
      <a href="{% url 'deals' %}">Deals</a>
      <a href="{% url 'Contact'%}">Contact</a>
    </nav>

    <div class="search-box">
      <form method="get" action="{% url 'Shop' %}">
        <input type="text" name="q" placeholder="Search products..." value="{{ query|default:'' }}">
      </form>
    </div>

    <div class="cart" style="display:inline-block">
      <a href="{% url 'cart' %}" style="text-decoration: none; cursor: pointer;color: black ; margin-right: 45px">üõí Cart</a>

      {% if request.user.is_authenticated %}
        <a href="{% url 'logout' %}" style="text-decoration: none; cursor: pointer;color: black ; margin-right: 45px">Logout</a>
      {% else %}
        <a href="{% url 'login_page' %}" style="text-decoration: none; cursor: pointer;color: black ; margin-right: 45px">Login</a>
      {% endif %}

      <img src="{% static 'images/Darkmode.svg' %}" alt="Dark Light" style="height: 1em ; width: 1rem" id="DarkLight" />
      
    </div>
    
  </header>

  <div class="imageslider" style="margin-top: 1rem;">
    {% include 'ImageSlider.html' %}
  </div>

  <!-- Categories -->
<section class="categories">
  <a href="{% url 'category' 'Fashion' %}" class = "categories-links"><div class="category">üëï Fashion</div></a>
  <a href="{% url 'category' 'Electronics' %}" class = "categories-links"><div class="category">üíª Electronics</div></a>
  <a href="{% url 'category' 'Food' %}" class = "categories-links"><div class="category">üçî Food</div></a>
  <a href="{% url 'category' 'Home' %}" class = "categories-links"><div class="category">üè† Home</div></a>
  <a href="{% url 'category' 'Gaming' %}" class = "categories-links"><div class="category">üéÆ Gaming</div></a>
</section>


  <h3 style="padding: 0 5%;">Popular items:</h3>

  <!-- Products -->
  <section class="products">

{% for i in items %}
  <div class="hidden-product" style="display:none">
    <a href="{% url 'item' i.pk %}">
      {% if i.images.first %}
        <img src="{{ i.images.first.image.url }}" alt="{{ i.name }}" class="main-img">
      {% else %}
        <img src="{% static 'images/blank_image.png' %}" alt="{{ i.name }}" class="main-img">
      {% endif %}
    </a>

    <a href="{% url 'item' i.pk %}" style="text-decoration: none;">
      <h3 style="margin:0; color: black; font-family: 'Times New Roman';">{{ i.name }}</h3>
    </a>

    <a href="{% url 'item' i.pk %}" style="text-decoration: none; color: #666;">
      {% if i.price %}
        <p style="margin:0;">${{ i.price}}</p>
      {% else %}
        <p style="margin:0;">Price not available</p>
      {% endif %}
    </a>

    <button type="button">Add to Cart</button>
  </div>
{% endfor %}

  </section>

  <div style="display: flex; justify-content: center; margin-top: 20px;">
    <button id="view-more-btn" style="background-color: #ff6b6b; color: white; padding: 15px; border-width: 0px">
      View More
    </button>
  </div>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 ShopEase. All rights reserved. | <a href="{% url 'PrivacyPolicy' %}">Privacy Policy</a></p>
    <p style="display: flex; justify-content: center;">Made by Aditya with ‚ô•</p>
  </footer>

  <script>

document.addEventListener("DOMContentLoaded", function() {
  console.log("‚úÖ DOM fully loaded"); //After DOM loaded perform this fxns.

  const view_more = document.getElementById('view-more-btn');
  const products = document.querySelectorAll(".hidden-product");
  const DarkMode = document.getElementById("DarkLight"); // make sure this ID exists in HTML

DarkMode.addEventListener('click', function() {
    if (DarkMode.src.includes("Darkmode.svg")) {
        // Switch to light mode icon
        DarkMode.src = "{% static 'images/sun.webp' %}";

        // Apply dark theme
        document.querySelectorAll("*").forEach(el => {
            el.style.backgroundColor = "black";
            el.style.color = "white";
        });

    } else {
        // Switch back to dark mode icon
        DarkMode.src = "{% static 'images/Darkmode.svg' %}";

        // Apply light theme
        document.querySelectorAll("*").forEach(el => {
            el.style.backgroundColor = "white";
            el.style.color = "black";
        });
    }
});



  products.forEach((product,index)=>{
    if(index < 5){
      product.style.display="block"
    }
  })

  view_more.addEventListener('click', function() {
    console.log("üëâ Button clicked");
    const hidden_items = document.querySelectorAll('.hidden-product');
    console.log("Found", hidden_items.length, "hidden items");

    hidden_items.forEach(item => {
      item.style.display = 'block';
    });

    // Hide button after showing all
    view_more.style.display = 'none';
  });



});

  </script>
</body>
</html>
